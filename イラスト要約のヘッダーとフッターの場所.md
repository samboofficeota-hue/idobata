# イラスト要約のヘッダーとフッターの場所

## 1. フロントエンドのカードコンテナ（IllustrationReportCard.tsx）

### カードのヘッダー部分
**ファイル**: `frontend/src/components/question/IllustrationReportCard.tsx`
**行数**: 34-39行目

```tsx
<div className="flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4 mb-6">
  <h3 className="text-xl md:text-2xl font-bold text-gray-800">{title}</h3>
  <DownloadButton downloadType="image" data={downloadData}>
    {downloadButtonText}
  </DownloadButton>
</div>
```

この部分は、カードの外側のヘッダーで、「イラスト要約」というタイトルとダウンロードボタンが表示されます。

---

## 2. 生成されたHTMLコンテンツ内のヘッダーとフッター（iframe内）

### 生成元のプロンプト
**ファイル**: `idea-discussion/backend/services/questionVisualReportGenerator.js`
**行数**: 112行目（ヘッダー仕様）、135行目（フッター仕様）

```javascript
### 4. レイアウト
  - ヘッダー：右上に小さく日付/出典。その下に、左揃えタイトル。
  ...
  - フッターに出典情報を明記
```

### 実際のHTMLの保存場所
生成されたHTMLは、以下の場所に保存されています：

1. **データベース**: `QuestionVisualReport`モデルの`overallAnalysis`フィールド
2. **表示**: `IllustrationSummaryContent.tsx`のiframe内で表示（24行目の`srcDoc={visualReport}`）

### 生成されたHTMLの構造例
LLMが生成するHTMLは、以下のような構造になります：

```html
<!DOCTYPE html>
<html>
<head>
  <style>
    /* CSSスタイル */
  </style>
</head>
<body>
  <!-- ヘッダー部分 -->
  <header>
    <!-- 右上に日付/出典 -->
    <!-- その下に左揃えタイトル -->
  </header>
  
  <!-- メインコンテンツ -->
  <main>
    <!-- 課題点と解決策の内容 -->
  </main>
  
  <!-- フッター部分 -->
  <footer>
    <!-- 出典情報 -->
  </footer>
</body>
</html>
```

---

## 変更方法

### フロントエンドのカードヘッダーを変更する場合
`frontend/src/components/question/IllustrationReportCard.tsx`の34-39行目を編集

### iframe内のヘッダー・フッターを変更する場合
`idea-discussion/backend/services/questionVisualReportGenerator.js`のプロンプト（112行目、135行目付近）を編集して、LLMに生成させるHTMLの構造を指定

### 既存の生成済みHTMLを直接変更する場合
データベースの`QuestionVisualReport`コレクションの`overallAnalysis`フィールドを直接編集（ただし、再生成時に上書きされる可能性があります）

---

## 確認方法

実際に生成されているHTMLを確認するには：

1. **ブラウザの開発者ツール**でiframeの内容を確認
2. **データベース**で`QuestionVisualReport`の`overallAnalysis`フィールドを確認
3. **バックエンドのログ**で生成されたHTMLを確認
